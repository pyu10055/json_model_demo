/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
import{concat,slice,stack,tensor,tidy,unstack,util,io,Tensor,add,addN,mod,mul,div,floorDiv,sub,minimum,maximum,pow,squaredDifference,abs,acos,acosh,asin,asinh,atan,atan2,atanh,ceil,cos,cosh,elu,erf,exp,expm1,floor,log,log1p,neg,reciprocal,relu,round,selu,sigmoid,sin,sign,sinh,softplus,sqrt,square,tanh,tan,clipByValue,scalar,prod,leakyRelu,conv1d,conv2d,conv2dTranspose,depthwiseConv2d,avgPool,maxPool,fill,linspace,oneHot,ones,onesLike,randomUniform,range,truncatedNormal,zeros,zerosLike,image,whereAsync,setdiff1dAsync,topk,tensor1d,equal,notEqual,greater,greaterEqual,less,lessEqual,logicalAnd,logicalNot,logicalOr,where,matMul,transpose,batchNormalization,localResponseNormalization,softmax,logSoftmax,sparseToDense,max,mean,min,sum,all,any,argMax,argMin,gather,reverse,stridedSlice,tile,split,scatterND,gatherND,fft,ifft,rfft,irfft,cast,expandDims,squeeze,reshape,pad,spaceToBatchND,batchToSpaceND,depthToSpace}from"@tensorflow/tfjs-core";var __assign=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e};function __awaiter(e,t,r,a){return new(r||(r=Promise))(function(n,o){function s(e){try{u(a.next(e))}catch(e){o(e)}}function i(e){try{u(a.throw(e))}catch(e){o(e)}}function u(e){e.done?n(e.value):new r(function(t){t(e.value)}).then(s,i)}u((a=a.apply(e,t||[])).next())})}function __generator(e,t){var r,a,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,a&&(n=a[2&o[0]?"return":o[0]?"throw":"next"])&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[0,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,a=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],a=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}}var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var aspromise=asPromise;function asPromise(e,t){for(var r=new Array(arguments.length-1),a=0,n=2,o=!0;n<arguments.length;)r[a++]=arguments[n++];return new Promise(function(n,s){r[a]=function(e){if(o)if(o=!1,e)s(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];n.apply(null,t)}};try{e.apply(t||null,r)}catch(e){o&&(o=!1,s(e))}})}var base64_1=createCommonjsModule(function(e,t){var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var a=new Array(64),n=new Array(123),o=0;o<64;)n[a[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;r.encode=function(e,t,r){for(var n,o=null,s=[],i=0,u=0;t<r;){var p=e[t++];switch(u){case 0:s[i++]=a[p>>2],n=(3&p)<<4,u=1;break;case 1:s[i++]=a[n|p>>4],n=(15&p)<<2,u=2;break;case 2:s[i++]=a[n|p>>6],s[i++]=a[63&p],u=0}i>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),i=0)}return u&&(s[i++]=a[n],s[i++]=61,1===u&&(s[i++]=61)),o?(i&&o.push(String.fromCharCode.apply(String,s.slice(0,i))),o.join("")):String.fromCharCode.apply(String,s.slice(0,i))};r.decode=function(e,t,r){for(var a,o=r,s=0,i=0;i<e.length;){var u=e.charCodeAt(i++);if(61===u&&s>1)break;if(void 0===(u=n[u]))throw Error("invalid encoding");switch(s){case 0:a=u,s=1;break;case 1:t[r++]=a<<2|(48&u)>>4,a=u,s=2;break;case 2:t[r++]=(15&a)<<4|(60&u)>>2,a=u,s=3;break;case 3:t[r++]=(3&a)<<6|u,s=0}}if(1===s)throw Error("invalid encoding");return r-o},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}),eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},EventEmitter.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],a=0;a<r.length;)r[a].fn===t?r.splice(a,1):++a;return this},EventEmitter.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],a=1;a<arguments.length;)r.push(arguments[a++]);for(a=0;a<t.length;)t[a].fn.apply(t[a++].ctx,r)}return this};var float_1=factory(factory);function factory(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),a=128===r[3];function n(e,a,n){t[0]=e,a[n]=r[0],a[n+1]=r[1],a[n+2]=r[2],a[n+3]=r[3]}function o(e,a,n){t[0]=e,a[n]=r[3],a[n+1]=r[2],a[n+2]=r[1],a[n+3]=r[0]}function s(e,a){return r[0]=e[a],r[1]=e[a+1],r[2]=e[a+2],r[3]=e[a+3],t[0]}function i(e,a){return r[3]=e[a],r[2]=e[a+1],r[1]=e[a+2],r[0]=e[a+3],t[0]}e.writeFloatLE=a?n:o,e.writeFloatBE=a?o:n,e.readFloatLE=a?s:i,e.readFloatBE=a?i:s}():function(){function t(e,t,r,a){var n=t<0?1:0;if(n&&(t=-t),0===t)e(1/t>0?0:2147483648,r,a);else if(isNaN(t))e(2143289344,r,a);else if(t>3.4028234663852886e38)e((n<<31|2139095040)>>>0,r,a);else if(t<1.1754943508222875e-38)e((n<<31|Math.round(t/1.401298464324817e-45))>>>0,r,a);else{var o=Math.floor(Math.log(t)/Math.LN2);e((n<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,r,a)}}function r(e,t,r){var a=e(t,r),n=2*(a>>31)+1,o=a>>>23&255,s=8388607&a;return 255===o?s?NaN:n*(1/0):0===o?1.401298464324817e-45*n*s:n*Math.pow(2,o-150)*(s+8388608)}e.writeFloatLE=t.bind(null,writeUintLE),e.writeFloatBE=t.bind(null,writeUintBE),e.readFloatLE=r.bind(null,readUintLE),e.readFloatBE=r.bind(null,readUintBE)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),a=128===r[7];function n(e,a,n){t[0]=e,a[n]=r[0],a[n+1]=r[1],a[n+2]=r[2],a[n+3]=r[3],a[n+4]=r[4],a[n+5]=r[5],a[n+6]=r[6],a[n+7]=r[7]}function o(e,a,n){t[0]=e,a[n]=r[7],a[n+1]=r[6],a[n+2]=r[5],a[n+3]=r[4],a[n+4]=r[3],a[n+5]=r[2],a[n+6]=r[1],a[n+7]=r[0]}function s(e,a){return r[0]=e[a],r[1]=e[a+1],r[2]=e[a+2],r[3]=e[a+3],r[4]=e[a+4],r[5]=e[a+5],r[6]=e[a+6],r[7]=e[a+7],t[0]}function i(e,a){return r[7]=e[a],r[6]=e[a+1],r[5]=e[a+2],r[4]=e[a+3],r[3]=e[a+4],r[2]=e[a+5],r[1]=e[a+6],r[0]=e[a+7],t[0]}e.writeDoubleLE=a?n:o,e.writeDoubleBE=a?o:n,e.readDoubleLE=a?s:i,e.readDoubleBE=a?i:s}():function(){function t(e,t,r,a,n,o){var s=a<0?1:0;if(s&&(a=-a),0===a)e(0,n,o+t),e(1/a>0?0:2147483648,n,o+r);else if(isNaN(a))e(0,n,o+t),e(2146959360,n,o+r);else if(a>1.7976931348623157e308)e(0,n,o+t),e((s<<31|2146435072)>>>0,n,o+r);else{var i;if(a<2.2250738585072014e-308)e((i=a/5e-324)>>>0,n,o+t),e((s<<31|i/4294967296)>>>0,n,o+r);else{var u=Math.floor(Math.log(a)/Math.LN2);1024===u&&(u=1023),e(4503599627370496*(i=a*Math.pow(2,-u))>>>0,n,o+t),e((s<<31|u+1023<<20|1048576*i&1048575)>>>0,n,o+r)}}}function r(e,t,r,a,n){var o=e(a,n+t),s=e(a,n+r),i=2*(s>>31)+1,u=s>>>20&2047,p=4294967296*(1048575&s)+o;return 2047===u?p?NaN:i*(1/0):0===u?5e-324*i*p:i*Math.pow(2,u-1075)*(p+4503599627370496)}e.writeDoubleLE=t.bind(null,writeUintLE,0,4),e.writeDoubleBE=t.bind(null,writeUintBE,4,0),e.readDoubleLE=r.bind(null,readUintLE,0,4),e.readDoubleBE=r.bind(null,readUintBE,4,0)}(),e}function writeUintLE(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function writeUintBE(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod$$1=eval("quire".replace(/^/,"re"))(moduleName);if(mod$$1&&(mod$$1.length||Object.keys(mod$$1).length))return mod$$1}catch(e){}return null}var utf8_1=createCommonjsModule(function(e,t){var r=t;r.length=function(e){for(var t=0,r=0,a=0;a<e.length;++a)(r=e.charCodeAt(a))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(a+1))?(++a,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var a,n=null,o=[],s=0;t<r;)(a=e[t++])<128?o[s++]=a:a>191&&a<224?o[s++]=(31&a)<<6|63&e[t++]:a>239&&a<365?(a=((7&a)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(a>>10),o[s++]=56320+(1023&a)):o[s++]=(15&a)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,o)),s=0);return n?(s&&n.push(String.fromCharCode.apply(String,o.slice(0,s))),n.join("")):String.fromCharCode.apply(String,o.slice(0,s))},r.write=function(e,t,r){for(var a,n,o=r,s=0;s<e.length;++s)(a=e.charCodeAt(s))<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=63&a|128):55296==(64512&a)&&56320==(64512&(n=e.charCodeAt(s+1)))?(a=65536+((1023&a)<<10)+(1023&n),++s,t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=63&a|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=63&a|128);return r-o}}),pool_1=pool;function pool(e,t,r){var a=r||8192,n=a>>>1,o=null,s=a;return function(r){if(r<1||r>n)return e(r);s+r>a&&(o=e(a),s=0);var i=t.call(o,s,s+=r);return 7&s&&(s=1+(7|s)),i}}var longbits=LongBits;function LongBits(e,t){this.lo=e>>>0,this.hi=t>>>0}var zero=LongBits.zero=new LongBits(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits.zeroHash="\0\0\0\0\0\0\0\0";LongBits.fromNumber=function(e){if(0===e)return zero;var t=e<0;t&&(e=-e);var r=e>>>0,a=(e-r)/4294967296>>>0;return t&&(a=~a>>>0,r=~r>>>0,++r>4294967295&&(r=0,++a>4294967295&&(a=0))),new LongBits(r,a)},LongBits.from=function(e){if("number"==typeof e)return LongBits.fromNumber(e);if(minimal.isString(e)){if(!minimal.Long)return LongBits.fromNumber(parseInt(e,10));e=minimal.Long.fromString(e)}return e.low||e.high?new LongBits(e.low>>>0,e.high>>>0):zero},LongBits.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},LongBits.prototype.toLong=function(e){return minimal.Long?new minimal.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var charCodeAt=String.prototype.charCodeAt;LongBits.fromHash=function(e){return e===zeroHash?zero:new LongBits((charCodeAt.call(e,0)|charCodeAt.call(e,1)<<8|charCodeAt.call(e,2)<<16|charCodeAt.call(e,3)<<24)>>>0,(charCodeAt.call(e,4)|charCodeAt.call(e,5)<<8|charCodeAt.call(e,6)<<16|charCodeAt.call(e,7)<<24)>>>0)},LongBits.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},LongBits.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},LongBits.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10};var minimal=createCommonjsModule(function(e,t){var r=t;function a(e,t,r){for(var a=Object.keys(t),n=0;n<a.length;++n)void 0!==e[a[n]]&&r||(e[a[n]]=t[a[n]]);return e}function n(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&a(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=aspromise,r.base64=base64_1,r.EventEmitter=eventemitter,r.float=float_1,r.inquire=inquire_1,r.utf8=utf8_1,r.pool=pool_1,r.LongBits=longbits,r.global="undefined"!=typeof window&&window||void 0!==commonjsGlobal&&commonjsGlobal||"undefined"!=typeof self&&self||commonjsGlobal,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isNode=Boolean(r.global.process&&r.global.process.versions&&r.global.process.versions.node),r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var a=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(a.lo,a.hi,t):a.toNumber(Boolean(t))},r.merge=a,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=n,r.ProtocolError=n("ProtocolError"),r.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},r.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}}),writer=Writer,BufferWriter,LongBits$1=minimal.LongBits,base64=minimal.base64,utf8=minimal.utf8;function Op(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function noop(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}function writeByte(e,t,r){t[r]=255&e}function writeVarint32(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e}function VarintOp(e,t){this.len=e,this.next=void 0,this.val=t}function writeVarint64(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function writeFixed32(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}Writer.create=minimal.Buffer?function(){return(Writer.create=function(){return new BufferWriter})()}:function(){return new Writer},Writer.alloc=function(e){return new minimal.Array(e)},minimal.Array!==Array&&(Writer.alloc=minimal.pool(Writer.alloc,minimal.Array.prototype.subarray)),Writer.prototype._push=function(e,t,r){return this.tail=this.tail.next=new Op(e,t,r),this.len+=t,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},Writer.prototype.int32=function(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)},Writer.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},Writer.prototype.uint64=function(e){var t=LongBits$1.from(e);return this._push(writeVarint64,t.length(),t)},Writer.prototype.int64=Writer.prototype.uint64,Writer.prototype.sint64=function(e){var t=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)},Writer.prototype.bool=function(e){return this._push(writeByte,1,e?1:0)},Writer.prototype.fixed32=function(e){return this._push(writeFixed32,4,e>>>0)},Writer.prototype.sfixed32=Writer.prototype.fixed32,Writer.prototype.fixed64=function(e){var t=LongBits$1.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)},Writer.prototype.sfixed64=Writer.prototype.fixed64,Writer.prototype.float=function(e){return this._push(minimal.float.writeFloatLE,4,e)},Writer.prototype.double=function(e){return this._push(minimal.float.writeDoubleLE,8,e)};var writeBytes=minimal.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var a=0;a<e.length;++a)t[r+a]=e[a]};Writer.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(writeByte,1,0);if(minimal.isString(e)){var r=Writer.alloc(t=base64.length(e));base64.decode(e,r,0),e=r}return this.uint32(t)._push(writeBytes,t,e)},Writer.prototype.string=function(e){var t=utf8.length(e);return t?this.uint32(t)._push(utf8.write,t,e):this._push(writeByte,1,0)},Writer.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},Writer.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},Writer._configure=function(e){BufferWriter=e};var writer_buffer=BufferWriter$1;(BufferWriter$1.prototype=Object.create(writer.prototype)).constructor=BufferWriter$1;var Buffer=minimal.Buffer;function BufferWriter$1(){writer.call(this)}BufferWriter$1.alloc=function(e){return(BufferWriter$1.alloc=minimal._Buffer_allocUnsafe)(e)};var writeBytesBuffer=Buffer&&Buffer.prototype instanceof Uint8Array&&"set"===Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var a=0;a<e.length;)t[r++]=e[a++]};function writeStringBuffer(e,t,r){e.length<40?minimal.utf8.write(e,t,r):t.utf8Write(e,r)}BufferWriter$1.prototype.bytes=function(e){minimal.isString(e)&&(e=minimal._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(writeBytesBuffer,t,e),this},BufferWriter$1.prototype.string=function(e){var t=Buffer.byteLength(e);return this.uint32(t),t&&this._push(writeStringBuffer,t,e),this};var reader=Reader,BufferReader,LongBits$2=minimal.LongBits,utf8$1=minimal.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader(e){this.buf=e,this.pos=0,this.len=e.length}var create_array="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Reader(e);throw Error("illegal buffer")};function readLongVarint(){var e=new LongBits$2(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits$2(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.create=minimal.Buffer?function(e){return(Reader.create=function(e){return minimal.Buffer.isBuffer(e)?new BufferReader(e):create_array(e)})(e)}:create_array,Reader.prototype._slice=minimal.Array.prototype.subarray||minimal.Array.prototype.slice,Reader.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return e}}(),Reader.prototype.int32=function(){return 0|this.uint32()},Reader.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},Reader.prototype.bool=function(){return 0!==this.uint32()},Reader.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=minimal.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},Reader.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=minimal.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},Reader.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},Reader.prototype.string=function(){var e=this.bytes();return utf8$1.read(e,0,e.length)},Reader.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},Reader._configure=function(e){BufferReader=e;var t=minimal.Long?"toLong":"toNumber";minimal.merge(Reader.prototype,{int64:function(){return readLongVarint.call(this)[t](!1)},uint64:function(){return readLongVarint.call(this)[t](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[t](!1)},fixed64:function(){return readFixed64.call(this)[t](!0)},sfixed64:function(){return readFixed64.call(this)[t](!1)}})};var reader_buffer=BufferReader$1;function BufferReader$1(e){reader.call(this,e)}(BufferReader$1.prototype=Object.create(reader.prototype)).constructor=BufferReader$1,minimal.Buffer&&(BufferReader$1.prototype._slice=minimal.Buffer.prototype.slice),BufferReader$1.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len))};var service=Service;function Service(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");minimal.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(Service.prototype=Object.create(minimal.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function e(t,r,a,n,o){if(!n)throw TypeError("request must be specified");var s=this;if(!o)return minimal.asPromise(e,s,t,r,a,n);if(s.rpcImpl)try{return s.rpcImpl(t,r[s.requestDelimited?"encodeDelimited":"encode"](n).finish(),function(e,r){if(e)return s.emit("error",e,t),o(e);if(null!==r){if(!(r instanceof a))try{r=a[s.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return s.emit("error",e,t),o(e)}return s.emit("data",r,t),o(null,r)}s.end(!0)})}catch(e){return s.emit("error",e,t),void setTimeout(function(){o(e)},0)}else setTimeout(function(){o(Error("already ended"))},0)},Service.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var rpc_1=createCommonjsModule(function(e,t){t.Service=service}),roots={},indexMinimal=createCommonjsModule(function(e,t){var r=t;function a(){r.Reader._configure(r.BufferReader),r.util._configure()}r.build="minimal",r.Writer=writer,r.BufferWriter=writer_buffer,r.Reader=reader,r.BufferReader=reader_buffer,r.util=minimal,r.rpc=rpc_1,r.roots=roots,r.configure=a,r.Writer._configure(r.BufferWriter),a()}),minimal$1=indexMinimal,minimal_1=minimal$1.roots,minimal_2=minimal$1.Reader,minimal_3=minimal$1.util,$Reader=minimal$1.Reader,$util=minimal$1.util,$root=minimal$1.roots.default||(minimal$1.roots.default={});$root.tensorflow=function(){var e,t,r={};return r.Any=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.typeUrl="",e.prototype.value=$util.newBuffer([]),e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.Any;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.typeUrl=e.string();break;case 2:a.value=e.bytes();break;default:e.skipType(7&n)}}return a},e}(),r.DataType=(e={},(t=Object.create(e))[e[0]="DT_INVALID"]=0,t[e[1]="DT_FLOAT"]=1,t[e[2]="DT_DOUBLE"]=2,t[e[3]="DT_INT32"]=3,t[e[4]="DT_UINT8"]=4,t[e[5]="DT_INT16"]=5,t[e[6]="DT_INT8"]=6,t[e[7]="DT_STRING"]=7,t[e[8]="DT_COMPLEX64"]=8,t[e[9]="DT_INT64"]=9,t[e[10]="DT_BOOL"]=10,t[e[11]="DT_QINT8"]=11,t[e[12]="DT_QUINT8"]=12,t[e[13]="DT_QINT32"]=13,t[e[14]="DT_BFLOAT16"]=14,t[e[101]="DT_FLOAT_REF"]=101,t[e[102]="DT_DOUBLE_REF"]=102,t[e[103]="DT_INT32_REF"]=103,t[e[104]="DT_UINT8_REF"]=104,t[e[105]="DT_INT16_REF"]=105,t[e[106]="DT_INT8_REF"]=106,t[e[107]="DT_STRING_REF"]=107,t[e[108]="DT_COMPLEX64_REF"]=108,t[e[109]="DT_INT64_REF"]=109,t[e[110]="DT_BOOL_REF"]=110,t[e[111]="DT_QINT8_REF"]=111,t[e[112]="DT_QUINT8_REF"]=112,t[e[113]="DT_QINT32_REF"]=113,t[e[114]="DT_BFLOAT16_REF"]=114,t),r.TensorShape=function(){function e(e){if(this.dim=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.dim=$util.emptyArray,e.prototype.unknownRank=!1,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.TensorShape;e.pos<r;){var n=e.uint32();switch(n>>>3){case 2:a.dim&&a.dim.length||(a.dim=[]),a.dim.push($root.tensorflow.TensorShape.Dim.decode(e,e.uint32()));break;case 3:a.unknownRank=e.bool();break;default:e.skipType(7&n)}}return a},e.Dim=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.size=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.name="",e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.TensorShape.Dim;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.size=e.int64();break;case 2:a.name=e.string();break;default:e.skipType(7&n)}}return a},e}(),e}(),r.Tensor=function(){function e(e){if(this.floatVal=[],this.doubleVal=[],this.intVal=[],this.stringVal=[],this.scomplexVal=[],this.int64Val=[],this.boolVal=[],this.uint32Val=[],this.uint64Val=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.dtype=0,e.prototype.tensorShape=null,e.prototype.versionNumber=0,e.prototype.tensorContent=$util.newBuffer([]),e.prototype.floatVal=$util.emptyArray,e.prototype.doubleVal=$util.emptyArray,e.prototype.intVal=$util.emptyArray,e.prototype.stringVal=$util.emptyArray,e.prototype.scomplexVal=$util.emptyArray,e.prototype.int64Val=$util.emptyArray,e.prototype.boolVal=$util.emptyArray,e.prototype.uint32Val=$util.emptyArray,e.prototype.uint64Val=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.Tensor;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.dtype=e.int32();break;case 2:a.tensorShape=$root.tensorflow.TensorShape.decode(e,e.uint32());break;case 3:a.versionNumber=e.int32();break;case 4:a.tensorContent=e.bytes();break;case 5:if(a.floatVal&&a.floatVal.length||(a.floatVal=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)a.floatVal.push(e.float());else a.floatVal.push(e.float());break;case 6:if(a.doubleVal&&a.doubleVal.length||(a.doubleVal=[]),2==(7&n))for(o=e.uint32()+e.pos;e.pos<o;)a.doubleVal.push(e.double());else a.doubleVal.push(e.double());break;case 7:if(a.intVal&&a.intVal.length||(a.intVal=[]),2==(7&n))for(o=e.uint32()+e.pos;e.pos<o;)a.intVal.push(e.int32());else a.intVal.push(e.int32());break;case 8:a.stringVal&&a.stringVal.length||(a.stringVal=[]),a.stringVal.push(e.bytes());break;case 9:if(a.scomplexVal&&a.scomplexVal.length||(a.scomplexVal=[]),2==(7&n))for(o=e.uint32()+e.pos;e.pos<o;)a.scomplexVal.push(e.float());else a.scomplexVal.push(e.float());break;case 10:if(a.int64Val&&a.int64Val.length||(a.int64Val=[]),2==(7&n))for(o=e.uint32()+e.pos;e.pos<o;)a.int64Val.push(e.int64());else a.int64Val.push(e.int64());break;case 11:if(a.boolVal&&a.boolVal.length||(a.boolVal=[]),2==(7&n))for(o=e.uint32()+e.pos;e.pos<o;)a.boolVal.push(e.bool());else a.boolVal.push(e.bool());break;case 16:if(a.uint32Val&&a.uint32Val.length||(a.uint32Val=[]),2==(7&n))for(o=e.uint32()+e.pos;e.pos<o;)a.uint32Val.push(e.uint32());else a.uint32Val.push(e.uint32());break;case 17:if(a.uint64Val&&a.uint64Val.length||(a.uint64Val=[]),2==(7&n))for(o=e.uint32()+e.pos;e.pos<o;)a.uint64Val.push(e.uint64());else a.uint64Val.push(e.uint64());break;default:e.skipType(7&n)}}return a},e}(),r.AttrValue=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.list=null,e.prototype.s=$util.newBuffer([]),e.prototype.i=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.f=0,e.prototype.b=!1,e.prototype.type=0,e.prototype.shape=null,e.prototype.tensor=null,e.prototype.placeholder="",e.prototype.func=null,Object.defineProperty(e.prototype,"value",{get:$util.oneOfGetter(t=["list","s","i","f","b","type","shape","tensor","placeholder","func"]),set:$util.oneOfSetter(t)}),e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.AttrValue;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.list=$root.tensorflow.AttrValue.ListValue.decode(e,e.uint32());break;case 2:a.s=e.bytes();break;case 3:a.i=e.int64();break;case 4:a.f=e.float();break;case 5:a.b=e.bool();break;case 6:a.type=e.int32();break;case 7:a.shape=$root.tensorflow.TensorShape.decode(e,e.uint32());break;case 8:a.tensor=$root.tensorflow.Tensor.decode(e,e.uint32());break;case 9:a.placeholder=e.string();break;case 10:a.func=$root.tensorflow.NameAttrList.decode(e,e.uint32());break;default:e.skipType(7&n)}}return a},e.ListValue=function(){function e(e){if(this.s=[],this.i=[],this.f=[],this.b=[],this.type=[],this.shape=[],this.tensor=[],this.func=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.s=$util.emptyArray,e.prototype.i=$util.emptyArray,e.prototype.f=$util.emptyArray,e.prototype.b=$util.emptyArray,e.prototype.type=$util.emptyArray,e.prototype.shape=$util.emptyArray,e.prototype.tensor=$util.emptyArray,e.prototype.func=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.AttrValue.ListValue;e.pos<r;){var n=e.uint32();switch(n>>>3){case 2:a.s&&a.s.length||(a.s=[]),a.s.push(e.bytes());break;case 3:if(a.i&&a.i.length||(a.i=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)a.i.push(e.int64());else a.i.push(e.int64());break;case 4:if(a.f&&a.f.length||(a.f=[]),2==(7&n))for(o=e.uint32()+e.pos;e.pos<o;)a.f.push(e.float());else a.f.push(e.float());break;case 5:if(a.b&&a.b.length||(a.b=[]),2==(7&n))for(o=e.uint32()+e.pos;e.pos<o;)a.b.push(e.bool());else a.b.push(e.bool());break;case 6:if(a.type&&a.type.length||(a.type=[]),2==(7&n))for(o=e.uint32()+e.pos;e.pos<o;)a.type.push(e.int32());else a.type.push(e.int32());break;case 7:a.shape&&a.shape.length||(a.shape=[]),a.shape.push($root.tensorflow.TensorShape.decode(e,e.uint32()));break;case 8:a.tensor&&a.tensor.length||(a.tensor=[]),a.tensor.push($root.tensorflow.Tensor.decode(e,e.uint32()));break;case 9:a.func&&a.func.length||(a.func=[]),a.func.push($root.tensorflow.NameAttrList.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return a},e}(),e}(),r.NameAttrList=function(){function e(e){if(this.attr={},e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.name="",e.prototype.attr=$util.emptyObject,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r,a=void 0===t?e.len:e.pos+t,n=new $root.tensorflow.NameAttrList;e.pos<a;){var o=e.uint32();switch(o>>>3){case 1:n.name=e.string();break;case 2:e.skip().pos++,n.attr===$util.emptyObject&&(n.attr={}),r=e.string(),e.pos++,n.attr[r]=$root.tensorflow.AttrValue.decode(e,e.uint32());break;default:e.skipType(7&o)}}return n},e}(),r.NodeDef=function(){function e(e){if(this.input=[],this.attr={},e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.name="",e.prototype.op="",e.prototype.input=$util.emptyArray,e.prototype.device="",e.prototype.attr=$util.emptyObject,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r,a=void 0===t?e.len:e.pos+t,n=new $root.tensorflow.NodeDef;e.pos<a;){var o=e.uint32();switch(o>>>3){case 1:n.name=e.string();break;case 2:n.op=e.string();break;case 3:n.input&&n.input.length||(n.input=[]),n.input.push(e.string());break;case 4:n.device=e.string();break;case 5:e.skip().pos++,n.attr===$util.emptyObject&&(n.attr={}),r=e.string(),e.pos++,n.attr[r]=$root.tensorflow.AttrValue.decode(e,e.uint32());break;default:e.skipType(7&o)}}return n},e}(),r.VersionDef=function(){function e(e){if(this.badConsumers=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.producer=0,e.prototype.minConsumer=0,e.prototype.badConsumers=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.VersionDef;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.producer=e.int32();break;case 2:a.minConsumer=e.int32();break;case 3:if(a.badConsumers&&a.badConsumers.length||(a.badConsumers=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)a.badConsumers.push(e.int32());else a.badConsumers.push(e.int32());break;default:e.skipType(7&n)}}return a},e}(),r.GraphDef=function(){function e(e){if(this.node=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.node=$util.emptyArray,e.prototype.versions=null,e.prototype.library=null,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.GraphDef;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.node&&a.node.length||(a.node=[]),a.node.push($root.tensorflow.NodeDef.decode(e,e.uint32()));break;case 4:a.versions=$root.tensorflow.VersionDef.decode(e,e.uint32());break;case 2:a.library=$root.tensorflow.FunctionDefLibrary.decode(e,e.uint32());break;default:e.skipType(7&n)}}return a},e}(),r.CollectionDef=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.nodeList=null,e.prototype.bytesList=null,e.prototype.int64List=null,e.prototype.floatList=null,e.prototype.anyList=null,Object.defineProperty(e.prototype,"kind",{get:$util.oneOfGetter(t=["nodeList","bytesList","int64List","floatList","anyList"]),set:$util.oneOfSetter(t)}),e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.CollectionDef;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.nodeList=$root.tensorflow.CollectionDef.NodeList.decode(e,e.uint32());break;case 2:a.bytesList=$root.tensorflow.CollectionDef.BytesList.decode(e,e.uint32());break;case 3:a.int64List=$root.tensorflow.CollectionDef.Int64List.decode(e,e.uint32());break;case 4:a.floatList=$root.tensorflow.CollectionDef.FloatList.decode(e,e.uint32());break;case 5:a.anyList=$root.tensorflow.CollectionDef.AnyList.decode(e,e.uint32());break;default:e.skipType(7&n)}}return a},e.NodeList=function(){function e(e){if(this.value=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.value=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.CollectionDef.NodeList;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.value&&a.value.length||(a.value=[]),a.value.push(e.string());break;default:e.skipType(7&n)}}return a},e}(),e.BytesList=function(){function e(e){if(this.value=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.value=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.CollectionDef.BytesList;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.value&&a.value.length||(a.value=[]),a.value.push(e.bytes());break;default:e.skipType(7&n)}}return a},e}(),e.Int64List=function(){function e(e){if(this.value=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.value=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.CollectionDef.Int64List;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:if(a.value&&a.value.length||(a.value=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)a.value.push(e.int64());else a.value.push(e.int64());break;default:e.skipType(7&n)}}return a},e}(),e.FloatList=function(){function e(e){if(this.value=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.value=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.CollectionDef.FloatList;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:if(a.value&&a.value.length||(a.value=[]),2==(7&n))for(var o=e.uint32()+e.pos;e.pos<o;)a.value.push(e.float());else a.value.push(e.float());break;default:e.skipType(7&n)}}return a},e}(),e.AnyList=function(){function e(e){if(this.value=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.value=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.CollectionDef.AnyList;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.value&&a.value.length||(a.value=[]),a.value.push($root.tensorflow.Any.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return a},e}(),e}(),r.SaverDef=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t,r;return e.prototype.filenameTensorName="",e.prototype.saveTensorName="",e.prototype.restoreOpName="",e.prototype.maxToKeep=0,e.prototype.sharded=!1,e.prototype.keepCheckpointEveryNHours=0,e.prototype.version=0,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.SaverDef;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.filenameTensorName=e.string();break;case 2:a.saveTensorName=e.string();break;case 3:a.restoreOpName=e.string();break;case 4:a.maxToKeep=e.int32();break;case 5:a.sharded=e.bool();break;case 6:a.keepCheckpointEveryNHours=e.float();break;case 7:a.version=e.int32();break;default:e.skipType(7&n)}}return a},e.CheckpointFormatVersion=(t={},(r=Object.create(t))[t[0]="LEGACY"]=0,r[t[1]="V1"]=1,r[t[2]="V2"]=2,r),e}(),r.TensorInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var t;return e.prototype.name="",e.prototype.cooSparse=null,e.prototype.dtype=0,e.prototype.tensorShape=null,Object.defineProperty(e.prototype,"encoding",{get:$util.oneOfGetter(t=["name","cooSparse"]),set:$util.oneOfSetter(t)}),e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.TensorInfo;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.name=e.string();break;case 4:a.cooSparse=$root.tensorflow.TensorInfo.CooSparse.decode(e,e.uint32());break;case 2:a.dtype=e.int32();break;case 3:a.tensorShape=$root.tensorflow.TensorShape.decode(e,e.uint32());break;default:e.skipType(7&n)}}return a},e.CooSparse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.valuesTensorName="",e.prototype.indicesTensorName="",e.prototype.denseShapeTensorName="",e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.TensorInfo.CooSparse;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.valuesTensorName=e.string();break;case 2:a.indicesTensorName=e.string();break;case 3:a.denseShapeTensorName=e.string();break;default:e.skipType(7&n)}}return a},e}(),e}(),r.SignatureDef=function(){function e(e){if(this.inputs={},this.outputs={},e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.inputs=$util.emptyObject,e.prototype.outputs=$util.emptyObject,e.prototype.methodName="",e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r,a=void 0===t?e.len:e.pos+t,n=new $root.tensorflow.SignatureDef;e.pos<a;){var o=e.uint32();switch(o>>>3){case 1:e.skip().pos++,n.inputs===$util.emptyObject&&(n.inputs={}),r=e.string(),e.pos++,n.inputs[r]=$root.tensorflow.TensorInfo.decode(e,e.uint32());break;case 2:e.skip().pos++,n.outputs===$util.emptyObject&&(n.outputs={}),r=e.string(),e.pos++,n.outputs[r]=$root.tensorflow.TensorInfo.decode(e,e.uint32());break;case 3:n.methodName=e.string();break;default:e.skipType(7&o)}}return n},e}(),r.AssetFileDef=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.tensorInfo=null,e.prototype.filename="",e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.AssetFileDef;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.tensorInfo=$root.tensorflow.TensorInfo.decode(e,e.uint32());break;case 2:a.filename=e.string();break;default:e.skipType(7&n)}}return a},e}(),r.OpDef=function(){function e(e){if(this.inputArg=[],this.outputArg=[],this.attr=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.name="",e.prototype.inputArg=$util.emptyArray,e.prototype.outputArg=$util.emptyArray,e.prototype.attr=$util.emptyArray,e.prototype.deprecation=null,e.prototype.summary="",e.prototype.description="",e.prototype.isCommutative=!1,e.prototype.isAggregate=!1,e.prototype.isStateful=!1,e.prototype.allowsUninitializedInput=!1,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.OpDef;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.name=e.string();break;case 2:a.inputArg&&a.inputArg.length||(a.inputArg=[]),a.inputArg.push($root.tensorflow.OpDef.ArgDef.decode(e,e.uint32()));break;case 3:a.outputArg&&a.outputArg.length||(a.outputArg=[]),a.outputArg.push($root.tensorflow.OpDef.ArgDef.decode(e,e.uint32()));break;case 4:a.attr&&a.attr.length||(a.attr=[]),a.attr.push($root.tensorflow.OpDef.AttrDef.decode(e,e.uint32()));break;case 8:a.deprecation=$root.tensorflow.OpDef.OpDeprecation.decode(e,e.uint32());break;case 5:a.summary=e.string();break;case 6:a.description=e.string();break;case 18:a.isCommutative=e.bool();break;case 16:a.isAggregate=e.bool();break;case 17:a.isStateful=e.bool();break;case 19:a.allowsUninitializedInput=e.bool();break;default:e.skipType(7&n)}}return a},e.ArgDef=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.name="",e.prototype.description="",e.prototype.type=0,e.prototype.typeAttr="",e.prototype.numberAttr="",e.prototype.typeListAttr="",e.prototype.isRef=!1,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.OpDef.ArgDef;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.name=e.string();break;case 2:a.description=e.string();break;case 3:a.type=e.int32();break;case 4:a.typeAttr=e.string();break;case 5:a.numberAttr=e.string();break;case 6:a.typeListAttr=e.string();break;case 16:a.isRef=e.bool();break;default:e.skipType(7&n)}}return a},e}(),e.AttrDef=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.name="",e.prototype.type="",e.prototype.defaultValue=null,e.prototype.description="",e.prototype.hasMinimum=!1,e.prototype.minimum=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.allowedValues=null,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.OpDef.AttrDef;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.name=e.string();break;case 2:a.type=e.string();break;case 3:a.defaultValue=$root.tensorflow.AttrValue.decode(e,e.uint32());break;case 4:a.description=e.string();break;case 5:a.hasMinimum=e.bool();break;case 6:a.minimum=e.int64();break;case 7:a.allowedValues=$root.tensorflow.AttrValue.decode(e,e.uint32());break;default:e.skipType(7&n)}}return a},e}(),e.OpDeprecation=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.version=0,e.prototype.explanation="",e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.OpDef.OpDeprecation;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.version=e.int32();break;case 2:a.explanation=e.string();break;default:e.skipType(7&n)}}return a},e}(),e}(),r.OpList=function(){function e(e){if(this.op=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.op=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.OpList;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.op&&a.op.length||(a.op=[]),a.op.push($root.tensorflow.OpDef.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return a},e}(),r.MetaGraphDef=function(){function e(e){if(this.collectionDef={},this.signatureDef={},this.assetFileDef=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.metaInfoDef=null,e.prototype.graphDef=null,e.prototype.saverDef=null,e.prototype.collectionDef=$util.emptyObject,e.prototype.signatureDef=$util.emptyObject,e.prototype.assetFileDef=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r,a=void 0===t?e.len:e.pos+t,n=new $root.tensorflow.MetaGraphDef;e.pos<a;){var o=e.uint32();switch(o>>>3){case 1:n.metaInfoDef=$root.tensorflow.MetaGraphDef.MetaInfoDef.decode(e,e.uint32());break;case 2:n.graphDef=$root.tensorflow.GraphDef.decode(e,e.uint32());break;case 3:n.saverDef=$root.tensorflow.SaverDef.decode(e,e.uint32());break;case 4:e.skip().pos++,n.collectionDef===$util.emptyObject&&(n.collectionDef={}),r=e.string(),e.pos++,n.collectionDef[r]=$root.tensorflow.CollectionDef.decode(e,e.uint32());break;case 5:e.skip().pos++,n.signatureDef===$util.emptyObject&&(n.signatureDef={}),r=e.string(),e.pos++,n.signatureDef[r]=$root.tensorflow.SignatureDef.decode(e,e.uint32());break;case 6:n.assetFileDef&&n.assetFileDef.length||(n.assetFileDef=[]),n.assetFileDef.push($root.tensorflow.AssetFileDef.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},e.MetaInfoDef=function(){function e(e){if(this.tags=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.metaGraphVersion="",e.prototype.strippedOpList=null,e.prototype.anyInfo=null,e.prototype.tags=$util.emptyArray,e.prototype.tensorflowVersion="",e.prototype.tensorflowGitVersion="",e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.MetaGraphDef.MetaInfoDef;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.metaGraphVersion=e.string();break;case 2:a.strippedOpList=$root.tensorflow.OpList.decode(e,e.uint32());break;case 3:a.anyInfo=$root.tensorflow.Any.decode(e,e.uint32());break;case 4:a.tags&&a.tags.length||(a.tags=[]),a.tags.push(e.string());break;case 5:a.tensorflowVersion=e.string();break;case 6:a.tensorflowGitVersion=e.string();break;default:e.skipType(7&n)}}return a},e}(),e}(),r.SavedModel=function(){function e(e){if(this.metaGraphs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.savedModelSchemaVersion=$util.Long?$util.Long.fromBits(0,0,!1):0,e.prototype.metaGraphs=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.SavedModel;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.savedModelSchemaVersion=e.int64();break;case 2:a.metaGraphs&&a.metaGraphs.length||(a.metaGraphs=[]),a.metaGraphs.push($root.tensorflow.MetaGraphDef.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return a},e}(),r.FunctionDefLibrary=function(){function e(e){if(this.function=[],this.gradient=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.function=$util.emptyArray,e.prototype.gradient=$util.emptyArray,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.FunctionDefLibrary;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.function&&a.function.length||(a.function=[]),a.function.push($root.tensorflow.FunctionDef.decode(e,e.uint32()));break;case 2:a.gradient&&a.gradient.length||(a.gradient=[]),a.gradient.push($root.tensorflow.GradientDef.decode(e,e.uint32()));break;default:e.skipType(7&n)}}return a},e}(),r.FunctionDef=function(){function e(e){if(this.attr={},this.nodeDef=[],this.ret={},e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.signature=null,e.prototype.attr=$util.emptyObject,e.prototype.nodeDef=$util.emptyArray,e.prototype.ret=$util.emptyObject,e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r,a=void 0===t?e.len:e.pos+t,n=new $root.tensorflow.FunctionDef;e.pos<a;){var o=e.uint32();switch(o>>>3){case 1:n.signature=$root.tensorflow.OpDef.decode(e,e.uint32());break;case 5:e.skip().pos++,n.attr===$util.emptyObject&&(n.attr={}),r=e.string(),e.pos++,n.attr[r]=$root.tensorflow.AttrValue.decode(e,e.uint32());break;case 3:n.nodeDef&&n.nodeDef.length||(n.nodeDef=[]),n.nodeDef.push($root.tensorflow.NodeDef.decode(e,e.uint32()));break;case 4:e.skip().pos++,n.ret===$util.emptyObject&&(n.ret={}),r=e.string(),e.pos++,n.ret[r]=e.string();break;default:e.skipType(7&o)}}return n},e}(),r.GradientDef=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.functionName="",e.prototype.gradientFunc="",e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,a=new $root.tensorflow.GradientDef;e.pos<r;){var n=e.uint32();switch(n>>>3){case 1:a.functionName=e.string();break;case 2:a.gradientFunc=e.string();break;default:e.skipType(7&n)}}return a},e}(),r}();var compiled_api=$root,compiled_api_1=compiled_api.tensorflow;function getParamValue(e,t,r,a){var n=t.inputParams[e];if(n&&void 0!==n.inputIndexStart){var o=n.inputIndexStart,s=0===n.inputIndexEnd?void 0:void 0===n.inputIndexEnd?o+1:n.inputIndexEnd;if("tensor"===n.type)return getTensor(t.inputNames[n.inputIndexStart],r,a);if("tensors"===n.type)return t.inputNames.slice(o,s).map(function(e){return getTensor(e,r,a)});var i=Array.prototype.slice.call(getTensor(t.inputNames.slice(o)[0],r,a).dataSync());return"number"===n.type?i[0]:i}var u=t.attrParams[e];return u&&u.value}function getTensor(e,t,r){var a=parseNodeName(e),n=a[0],o=a[1],s=r.currentContextIds.find(function(e){return!!t[getNodeNameWithContextId(n,e)]});return void 0!==s?t[getNodeNameWithContextId(n,s)][o]:void 0}function getTensorsForCurrentContenxt(e,t,r){return t[getNodeNameWithContextId(e,r.currentContextId)]}function getNodeNameAndIndex(e,t){var r=parseNodeName(e),a=r[0],n=r[1];return[getNodeNameWithContextId(a,t&&t.currentContextId),n]}function getNodeNameWithContextId(e,t){return t?e+"-"+t:e}function parseNodeName(e){var t=e.lastIndexOf(":");return-1===t?[e,0]:[e.substring(0,t),Number(e.substring(t+1))]}function split$1(e,t){for(var r=[],a=0;a<e.length;a+=t)r.push(e.slice(a,a+t));return r}var json=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],arithmetic=Object.freeze({json:json}),json$1=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"clip_value_min",name:"clipValueMin",type:"number"},{tfName:"clip_value_max",name:"clipValueMax",type:"number"}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"clipValueMin",name:"clipValueMin",type:"number",defaultValue:0},{tfName:"clipValueMax",name:"clipValueMax",type:"number",defaultValue:6}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],basicMath=Object.freeze({json:json$1}),json$2=[{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"}]}],control=Object.freeze({json:json$2}),json$3=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]}],convolution=Object.freeze({json:json$3}),json$4=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]}],creation=Object.freeze({json:json$4}),json$5=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],dynamic=Object.freeze({json:json$5}),json$6=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]}],evaluation=Object.freeze({json:json$6}),json$7=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],graph=Object.freeze({json:json$7}),json$8=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}],image$1=Object.freeze({json:json$8}),json$9=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],logical=Object.freeze({json:json$9}),json$10=[{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],matrices=Object.freeze({json:json$10}),json$11=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],normalization=Object.freeze({json:json$11}),json$12=[{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]}],reduction=Object.freeze({json:json$12}),json$13=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool",notSupported:!0}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],sliceJoin=Object.freeze({json:json$13}),json$14=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],spectral=Object.freeze({json:json$14}),json$15=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]}],transformation=Object.freeze({json:json$15}),CONTROL_FLOW_OPS=["Switch","Merge","Enter","Exit","NextIteration"],DYNAMIC_SHAPE_OPS=["NonMaxSuppressionV2","NonMaxSuppressionV3","Where"],OperationMapper=function(){function e(){var e=[arithmetic,basicMath,control,convolution,creation,dynamic,evaluation,logical,image$1,graph,matrices,normalization,reduction,sliceJoin,spectral,transformation],t=[].concat.apply([],e.map(function(e){return e.json}));this.opMappers=t.reduce(function(e,t){return e[t.tfOpName]=t,e},{})}return Object.defineProperty(e,"Instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),e.prototype.isControlFlow=function(e){return CONTROL_FLOW_OPS.some(function(t){return t===e.op})},e.prototype.isDynamicShape=function(e){return DYNAMIC_SHAPE_OPS.some(function(t){return t===e.op})},e.prototype.transformGraph=function(e){var t=this,r=!1,a=!1,n=[],o=[],s=e.node.reduce(function(e,s){return e[s.name]=t.mapNode(s),t.isControlFlow(s)&&(r=!0),t.isDynamicShape(s)&&(a=!0),"Placeholder"===s.op&&n.push(e[s.name]),"Const"===s.op&&o.push(e[s.name]),e},{}),i=[],u=[];return Object.keys(s).forEach(function(e){var t=s[e];t.inputNames.forEach(function(e){var r=getNodeNameAndIndex(e)[0];t.inputs.push(s[r]),s[r].children.push(t)}),0===t.inputs.length&&i.push(t)}),Object.keys(s).forEach(function(e){var t=s[e];0===t.children.length&&u.push(t)}),{nodes:s,inputs:i,outputs:u,weights:o,placeholders:n,withControlFlow:r,withDynamicShape:a}},e.prototype.mapNode=function(e){var t=this,r=this.opMappers[e.op];if(void 0===r)throw new Error("Tensorflow Op is not supported: "+e.op);var a={name:e.name,op:e.op,category:r.category,inputNames:(e.input||[]).map(function(e){return e.startsWith("^")?e.substr(1):e}),inputs:[],children:[],inputParams:{},attrParams:{}};return r.inputs&&(a.inputParams=r.inputs.reduce(function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e},{})),r.attrs&&(a.attrParams=r.attrs.reduce(function(r,a){var n=a.type,o=void 0;switch(a.type){case"string":void 0===(o=t.getStringParam(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(o=t.getStringParam(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number":void 0===(o=t.getNumberParam(e.attr,a.tfName,a.defaultValue||0))&&a.tfDeprecatedName&&(o=t.getNumberParam(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number[]":void 0===(o=t.getNumericArrayParam(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(o=t.getNumericArrayParam(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool":void 0===(o=t.getBoolParam(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(o=t.getBoolParam(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape":void 0===(o=t.getTensorShapeParam(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(o=t.getTensorShapeParam(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype":void 0===(o=t.getDtypeParam(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(o=t.getDtypeParam(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: "+a.type+" for op: "+e.op)}return r[a.name]={value:o,type:n},r},{})),a},e.prototype.getStringParam=function(e,t,r,a){void 0===a&&(a=!1);var n=e[t];if(void 0!==n){var o=String.fromCharCode.apply(null,n.s);return a?o:o.toLowerCase()}return r},e.prototype.getBoolParam=function(e,t,r){var a=e[t];return a?a.b:r},e.prototype.getNumberParam=function(e,t,r){var a=e[t],n=a?a[a.value]:r;return"number"==typeof n?n:n.toInt()},e.prototype.getDtypeParam=function(e,t,r){var a=e[t];if(a&&a.type)switch(a.type){case compiled_api_1.DataType.DT_FLOAT:return"float32";case compiled_api_1.DataType.DT_INT32:return"int32";case compiled_api_1.DataType.DT_BOOL:return"bool";default:return r}return r},e.prototype.getTensorShapeParam=function(e,t,r){var a=e[t];return a&&a.shape?a.shape.dim.map(function(e){return"number"==typeof e.size?e.size:e.size.toInt()}):r},e.prototype.getNumericArrayParam=function(e,t,r){var a=e[t];return a?(a.list.f&&a.list.f.length?a.list.f:a.list.i).map(function(e){return"number"==typeof e?e:e.toInt()}):r},e}(),executeOp=function(e,t,r){switch(e.op){case"BiasAdd":case"Add":return[add(getParamValue("a",e,t,r),getParamValue("b",e,t,r))];case"AddN":return[addN(getParamValue("tensors",e,t,r))];case"FloorMod":case"Mod":return[mod(getParamValue("a",e,t,r),getParamValue("b",e,t,r))];case"Mul":return[mul(getParamValue("a",e,t,r),getParamValue("b",e,t,r))];case"RealDiv":case"Div":return[div(getParamValue("a",e,t,r),getParamValue("b",e,t,r))];case"FloorDiv":return[floorDiv(getParamValue("a",e,t,r),getParamValue("b",e,t,r))];case"Sub":return[sub(getParamValue("a",e,t,r),getParamValue("b",e,t,r))];case"Minimum":return[minimum(getParamValue("a",e,t,r),getParamValue("b",e,t,r))];case"Maximum":return[maximum(getParamValue("a",e,t,r),getParamValue("b",e,t,r))];case"Pow":return[pow(getParamValue("a",e,t,r),getParamValue("b",e,t,r))];case"SquaredDifference":return[squaredDifference(getParamValue("a",e,t,r),getParamValue("b",e,t,r))];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$1=function(e,t,r){switch(e.op){case"Abs":return[abs(getParamValue("x",e,t,r))];case"Acos":return[acos(getParamValue("x",e,t,r))];case"Acosh":return[acosh(getParamValue("x",e,t,r))];case"Asin":return[asin(getParamValue("x",e,t,r))];case"Asinh":return[asinh(getParamValue("x",e,t,r))];case"Atan":return[atan(getParamValue("x",e,t,r))];case"Atan2":return[atan2(getParamValue("x",e,t,r),getParamValue("y",e,t,r))];case"Atanh":return[atanh(getParamValue("x",e,t,r))];case"Ceil":return[ceil(getParamValue("x",e,t,r))];case"Cos":return[cos(getParamValue("x",e,t,r))];case"Cosh":return[cosh(getParamValue("x",e,t,r))];case"Elu":return[elu(getParamValue("x",e,t,r))];case"Erf":return[erf(getParamValue("x",e,t,r))];case"Exp":return[exp(getParamValue("x",e,t,r))];case"Expm1":return[expm1(getParamValue("x",e,t,r))];case"Floor":return[floor(getParamValue("x",e,t,r))];case"Log":return[log(getParamValue("x",e,t,r))];case"Log1p":return[log1p(getParamValue("x",e,t,r))];case"Neg":return[neg(getParamValue("x",e,t,r))];case"Reciprocal":return[reciprocal(getParamValue("x",e,t,r))];case"Relu":return[relu(getParamValue("x",e,t,r))];case"Round":return[round(getParamValue("x",e,t,r))];case"Selu":return[selu(getParamValue("x",e,t,r))];case"Sigmoid":return[sigmoid(getParamValue("x",e,t,r))];case"Sin":return[sin(getParamValue("x",e,t,r))];case"Sign":return[sign(getParamValue("x",e,t,r))];case"Sinh":return[sinh(getParamValue("x",e,t,r))];case"Softplus":return[softplus(getParamValue("x",e,t,r))];case"Sqrt":return[sqrt(getParamValue("x",e,t,r))];case"Square":return[square(getParamValue("x",e,t,r))];case"Tanh":return[tanh(getParamValue("x",e,t,r))];case"Tan":return[tan(getParamValue("x",e,t,r))];case"Relu6":case"ClipByValue":return[clipByValue(getParamValue("x",e,t,r),getParamValue("clipValueMin",e,t,r),getParamValue("clipValueMax",e,t,r))];case"Rsqrt":return[div(scalar(1,"float32"),sqrt(getTensor(e.inputNames[0],t,r)))];case"Prod":return[prod(getParamValue("x",e,t,r),getParamValue("axes",e,t,r))];case"LeakyRelu":return[leakyRelu(getParamValue("x",e,t,r),getParamValue("alpha",e,t,r))];default:throw TypeError("Node type "+e.op+" is not implemented")}},TensorArray=function(){function e(t,r,a,n,o,s,i){this.name=t,this.dtype=r,this.maxSize=a,this.elementShape=n,this.identicalElementShapes=o,this.dynamicSize=s,this.clearAfterRead=i,this.tensors=[],this.closed_=!1,this.id=e.nextId++}return Object.defineProperty(e.prototype,"closed",{get:function(){return this.closed_},enumerable:!0,configurable:!0}),e.prototype.clearAndClose=function(){this.tensors.forEach(function(e){return e.tensor.dispose()}),this.tensors=[],this.closed_=!0},e.prototype.size=function(){return this.tensors.length},e.prototype.read=function(e){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(e<0||e>=this.tensors.length)throw new Error("Tried to read from index "+e+", but array size is: "+this.tensors.length);var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray "+this.name+": Could not read index "+e+" twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor},e.prototype.readMany=function(e){var t=this;return e.map(function(e){return t.read(e)})},e.prototype.write=function(e,t){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index "+e+", but array is not resizeable and size is: "+this.maxSize);var r=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+",\n          because the value dtype is "+t.dtype+", but TensorArray dtype is "+this.dtype+".");if(0===this.size()&&0===this.elementShape.length&&(this.elementShape=t.shape),this.assertShapesMatch(this.elementShape,t.shape,"TensorArray "+this.name+": Could not write to TensorArray index "+e+"."),r&&r.read)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+", because it has already been read.");if(r&&r.written)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+", because it has already been written.");r.tensor=t,r.written=!0,this.tensors[e]=r},e.prototype.writeMany=function(e,t){var r=this;if(e.length!==t.length)throw new Error("TensorArray "+this.name+": could not write multiple tensors,because the index size: "+e.length+" is not the same as tensors size: "+t.length+".");e.forEach(function(e,a){return r.write(e,t[a])})},e.prototype.gather=function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but gather requested dtype "+t);if(!e){e=[];for(var r=0;r<this.size();r++)e.push(r)}if(0===e.length)return tensor([],[0].concat(this.elementShape));var a=this.readMany(e);return this.assertShapesMatch(this.elementShape,a[0].shape,"TensorArray shape mismatch: "),stack(a,0)},e.prototype.concat=function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but concat requested dtype "+e);if(0===this.size())return tensor([],[0].concat(this.elementShape));for(var t=[],r=0;r<this.size();r++)t.push(r);var a=this.readMany(t);return this.assertShapesMatch(this.elementShape,a[0].shape,"TensorArray shape mismatch: tensor array shape ("+this.elementShape+") vs first tensor shape ("+a[0].shape+")"),concat(a,0)},e.prototype.scatter=function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+t.dtype);if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: "+e.length+" vs. "+t.shape[0]);var r=Math.max.apply(Math,e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error("Max index must be < array size ("+r+"  vs. "+this.maxSize+")");this.writeMany(e,unstack(t,0))},e.prototype.split=function(e,t){var r=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+t.dtype);var a=0,n=e.map(function(e){return a+=e});if(a!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        "+a+", and tensor's shape is: "+t.shape);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths ("+this.maxSize+" vs. "+e.length+"), and the TensorArray is not marked as dynamically resizeable");var o=0===a?0:t.size/a,s=[];tidy(function(){t=t.reshape([1,a,o]);for(var i=0;i<e.length;++i){var u=[0,0===i?0:n[i-1],0],p=[1,e[i],o];s[i]=slice(t,u,p).reshape(r.elementShape)}return s});for(var i=[],u=0;u<e.length;u++)i[u]=u;this.writeMany(i,s)},e.prototype.assertShapesMatch=function(e,t,r){void 0===r&&(r=""),util.assert(this.arraysEqual(e,t),r+" Shapes "+e+" and "+t+" must match")},e.prototype.arraysEqual=function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(-1!==e[r]&&-1!==t[r]&&e[r]!==t[r])return!1;return!0},e.nextId=0,e}();function executeOp$2(e,t,r){return __awaiter(this,void 0,void 0,function(){var a,n,o,s,i,u,p,c,l,m,f,d,y,h,g,b,N,v,x,w,V,T,O,_,P,S,A,k,D,$,E,C,R,j,I;return __generator(this,function(M){switch(M.label){case 0:switch(e.op){case"LoopCond":return[3,1];case"Switch":return[3,2];case"Merge":return[3,4];case"Enter":return[3,5];case"Exit":return[3,6];case"NextIteration":return[3,7];case"TensorArrayV3":return[3,8];case"TensorArrayWriteV3":return[3,9];case"TensorArrayReadV3":return[3,10];case"TensorArrayGatherV3":return[3,11];case"TensorArrayScatterV3":return[3,12];case"TensorArrayConcatV3":return[3,13];case"TensorArraySplitV3":return[3,14];case"TensorArraySizeV3":return[3,15];case"TensorArrayCloseV3":return[3,16]}return[3,17];case 1:return[2,[getParamValue("pred",e,t,r).clone()]];case 2:return a=getParamValue("pred",e,t,r),n=getParamValue("data",e,t,r),[4,a.data()];case 3:return[2,M.sent()[0]?[void 0,n.clone()]:[n.clone(),void 0]];case 4:return[2,(o=e.inputNames.find(function(e){return void 0!==getTensor(e,t,r)}))?[getTensor(o,t,r).clone()]:void 0];case 5:return s=getParamValue("frameName",e,t,r),i=getParamValue("tensor",e,t,r),r.enterFrame(s),[2,[i.clone()]];case 6:return u=getParamValue("tensor",e,t,r),r.exitFrame(),[2,[u.clone()]];case 7:return p=getParamValue("tensor",e,t,r),r.nextIteration(),[2,[p.clone()]];case 8:return c=getParamValue("size",e,t,r),l=getParamValue("dtype",e,t,r),m=getParamValue("elementShape",e,t,r),f=getParamValue("dynamicSize",e,t,r),d=getParamValue("clearAfterRead",e,t,r),y=getParamValue("identicalElementShapes",e,t,r),h=getParamValue("name",e,t,r),g=new TensorArray(h,l,c,m,y,f,d),r.addTensorArray(g),[2,[scalar(g.id),scalar(1)]];case 9:return b=getParamValue("tensorArrayId",e,t,r),N=getParamValue("index",e,t,r),v=getParamValue("tensor",e,t,r),r.getTensorArray(b).write(N,v),[2,[scalar(1)]];case 10:return x=getParamValue("tensorArrayId",e,t,r),w=getParamValue("index",e,t,r),[2,[r.getTensorArray(x).read(w)]];case 11:return V=getParamValue("tensorArrayId",e,t,r),T=getParamValue("indices",e,t,r),O=getParamValue("dtype",e,t,r),[2,[r.getTensorArray(V).gather(T,O)]];case 12:return _=getParamValue("tensorArrayId",e,t,r),P=getParamValue("indices",e,t,r),S=getParamValue("tensor",e,t,r),r.getTensorArray(_).scatter(P,S),[2,[scalar(1)]];case 13:return A=getParamValue("tensorArrayId",e,t,r),k=r.getTensorArray(A),D=getParamValue("dtype",e,t,r),[2,[k.concat(D)]];case 14:return $=getParamValue("tensorArrayId",e,t,r),E=getParamValue("tensor",e,t,r),C=getParamValue("lengths",e,t,r),r.getTensorArray($).split(C,E),[2,[scalar(1)]];case 15:return R=getParamValue("tensorArrayId",e,t,r),j=r.getTensorArray(R),[2,[scalar(j.size(),"int32")]];case 16:return I=getParamValue("tensorArrayId",e,t,r),r.getTensorArray(I).clearAndClose(),[2,[]];case 17:throw TypeError("Node type "+e.op+" is not implemented")}})})}var executeOp$3=function(e,t,r){switch(e.op){case"Conv1D":var a=getParamValue("stride",e,t,r),n=getParamValue("pad",e,t,r),o=getParamValue("dataFormat",e,t,r).toUpperCase(),s=getParamValue("dilation",e,t,r);return[conv1d(getParamValue("x",e,t,r),getParamValue("filter",e,t,r),a,n,o,s)];case"Conv2D":a=getParamValue("strides",e,t,r),n=getParamValue("pad",e,t,r),o=getParamValue("dataFormat",e,t,r).toUpperCase();var i=getParamValue("dilations",e,t,r);return[conv2d(getParamValue("x",e,t,r),getParamValue("filter",e,t,r),[a[1],a[2]],n,o,[i[0],i[1]])];case"Conv2DBackpropInput":case"Conv2dTranspose":var u=getParamValue("outputShape",e,t,r);a=getParamValue("strides",e,t,r),n=getParamValue("pad",e,t,r);return[conv2dTranspose(getParamValue("x",e,t,r),getParamValue("filter",e,t,r),u,[a[1],a[2]],n)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":a=getParamValue("strides",e,t,r),n=getParamValue("pad",e,t,r),i=getParamValue("dilations",e,t,r),o=getParamValue("dataFormat",e,t,r).toUpperCase();return[depthwiseConv2d(getParamValue("input",e,t,r),getParamValue("filter",e,t,r),[a[1],a[2]],n,o,[i[0],i[1]])];case"AvgPool":a=getParamValue("strides",e,t,r),n=getParamValue("pad",e,t,r);var p=getParamValue("kernelSize",e,t,r);return[avgPool(getParamValue("x",e,t,r),[p[1],p[2]],[a[1],a[2]],n)];case"MaxPool":a=getParamValue("strides",e,t,r),n=getParamValue("pad",e,t,r),p=getParamValue("kernelSize",e,t,r);return[maxPool(getParamValue("x",e,t,r),[p[1],p[2]],[a[1],a[2]],n)];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$4=function(e,t,r){switch(e.op){case"Fill":var a=getParamValue("shape",e,t,r),n=getParamValue("dtype",e,t,r),o=getParamValue("value",e,t,r);return[fill(a,o,n)];case"LinSpace":var s=getParamValue("start",e,t,r),i=getParamValue("stop",e,t,r),u=getParamValue("num",e,t,r);return[linspace(s,i,u)];case"OneHot":var p=getParamValue("indices",e,t,r),c=getParamValue("depth",e,t,r),l=getParamValue("onValue",e,t,r),m=getParamValue("offValue",e,t,r);return[oneHot(p,c,l,m)];case"Ones":return[ones(getParamValue("shape",e,t,r),getParamValue("dtype",e,t,r))];case"OnesLike":return[onesLike(getParamValue("x",e,t,r))];case"RandomUniform":return[randomUniform(getParamValue("shape",e,t,r),getParamValue("minval",e,t,r),getParamValue("maxval",e,t,r),getParamValue("dtype",e,t,r))];case"Range":s=getParamValue("start",e,t,r);var f=getParamValue("stop",e,t,r),d=getParamValue("step",e,t,r);return[range(s,f,d,getParamValue("dtype",e,t,r))];case"TruncatedNormal":a=getParamValue("shape",e,t,r);var y=getParamValue("mean",e,t,r),h=getParamValue("stdDev",e,t,r),g=getParamValue("seed",e,t,r);return[truncatedNormal(a,y,h,getParamValue("dtype",e,t,r),g)];case"Zeros":return[zeros(getParamValue("shape",e,t,r),getParamValue("dtype",e,t,r))];case"ZerosLike":return[zerosLike(getParamValue("x",e,t,r))];default:throw TypeError("Node type "+e.op+" is not implemented")}};function executeOp$5(e,t,r){return __awaiter(this,void 0,void 0,function(){var a,n,o,s,i;return __generator(this,function(u){switch(u.label){case 0:switch(e.op){case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":return[3,1];case"Where":return[3,3];case"ListDiff":return[3,5]}return[3,7];case 1:return a=getParamValue("boxes",e,t,r),n=getParamValue("scores",e,t,r),o=getParamValue("maxOutputSize",e,t,r),s=getParamValue("iouThreshold",e,t,r),i=getParamValue("scoreThreshold",e,t,r),[4,image.nonMaxSuppressionAsync(a,n,o,s,i)];case 2:return[2,[u.sent()]];case 3:return[4,whereAsync(getParamValue("condition",e,t,r))];case 4:return[2,[u.sent()]];case 5:return[4,setdiff1dAsync(getParamValue("x",e,t,r),getParamValue("y",e,t,r))];case 6:return[2,u.sent()];case 7:throw TypeError("Node type "+e.op+" is not implemented")}})})}var executeOp$6=function(e,t,r){switch(e.op){case"TopKV2":var a=getParamValue("x",e,t,r),n=getParamValue("k",e,t,r),o=getParamValue("sorted",e,t,r),s=topk(a,n,o);return[s.values,s.indices];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$7=function(e,t,r){switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var a=getParamValue("default",e,t,r);return[getTensor(e.name,t,r)||a];case"Placeholder":return[getTensor(e.name,t,r)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":return[getParamValue("x",e,t,r).clone()];case"Snapshot":return[getParamValue("x",e,t,r).clone()];case"Shape":return[tensor1d(getParamValue("x",e,t,r).shape,"int32")];case"ShapeN":return getParamValue("x",e,t,r).map(function(e){return tensor1d(e.shape)});case"Size":return[scalar(getParamValue("x",e,t,r).size,"int32")];case"Rank":return[scalar(getParamValue("x",e,t,r).rank,"int32")];case"NoOp":return[];case"Print":var n=getParamValue("x",e,t,r),o=getParamValue("data",e,t,r),s=getParamValue("message",e,t,r),i=getParamValue("summarize",e,t,r);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(s);for(var u=0;u<o.length;u++)console.log(Array.prototype.slice.call(o[u].dataSync()).slice(0,i));return[n];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$8=function(e,t,r){switch(e.op){case"ResizeBilinear":var a=getParamValue("images",e,t,r),n=getParamValue("size",e,t,r),o=getParamValue("alignCorners",e,t,r);return[image.resizeBilinear(a,[n[0],n[1]],o)];case"ResizeNearestNeighbor":a=getParamValue("images",e,t,r),n=getParamValue("size",e,t,r),o=getParamValue("alignCorners",e,t,r);return[image.resizeNearestNeighbor(a,[n[0],n[1]],o)];case"CropAndResize":var s=getParamValue("image",e,t,r),i=getParamValue("boxes",e,t,r),u=getParamValue("boxInd",e,t,r),p=getParamValue("cropSize",e,t,r),c=getParamValue("method",e,t,r),l=getParamValue("extrapolationValue",e,t,r);return[image.cropAndResize(s,i,u,p,c,l)];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$9=function(e,t,r){switch(e.op){case"Equal":return[equal(getParamValue("a",e,t,r),getParamValue("b",e,t,r))];case"NotEqual":return[notEqual(getParamValue("a",e,t,r),getParamValue("b",e,t,r))];case"Greater":return[greater(getParamValue("a",e,t,r),getParamValue("b",e,t,r))];case"GreaterEqual":return[greaterEqual(getParamValue("a",e,t,r),getParamValue("b",e,t,r))];case"Less":return[less(getParamValue("a",e,t,r),getParamValue("b",e,t,r))];case"LessEqual":return[lessEqual(getParamValue("a",e,t,r),getParamValue("b",e,t,r))];case"LogicalAnd":return[logicalAnd(getParamValue("a",e,t,r),getParamValue("b",e,t,r))];case"LogicalNot":return[logicalNot(getParamValue("a",e,t,r))];case"LogicalOr":return[logicalOr(getParamValue("a",e,t,r),getParamValue("b",e,t,r))];case"Select":return[where(getParamValue("condition",e,t,r),getParamValue("a",e,t,r),getParamValue("b",e,t,r))];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$10=function(e,t,r){switch(e.op){case"BatchMatMul":case"MatMul":return[matMul(getParamValue("a",e,t,r),getParamValue("b",e,t,r),getParamValue("transposeA",e,t,r),getParamValue("transposeB",e,t,r))];case"Transpose":return[transpose(getParamValue("x",e,t,r),getParamValue("perm",e,t,r))];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$11=function(e,t,r){switch(e.op){case"FusedBatchNorm":case"FusedBatchNormV2":return[batchNormalization(getParamValue("x",e,t,r),getParamValue("mean",e,t,r),getParamValue("variance",e,t,r),getParamValue("epsilon",e,t,r),getParamValue("scale",e,t,r),getParamValue("offset",e,t,r))];case"LRN":return[localResponseNormalization(getParamValue("x",e,t,r),getParamValue("radius",e,t,r),getParamValue("bias",e,t,r),getParamValue("alpha",e,t,r),getParamValue("beta",e,t,r))];case"Softmax":return[softmax(getParamValue("x",e,t,r))];case"LogSoftmax":return[logSoftmax(getParamValue("x",e,t,r))];case"SparseToDense":return[sparseToDense(getParamValue("sparseIndices",e,t,r),getParamValue("outputShape",e,t,r),getParamValue("sparseValues",e,t,r),getParamValue("defaultValue",e,t,r))];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$12=function(e,t,r){switch(e.op){case"Max":var a=getParamValue("axis",e,t,r),n=getParamValue("keepDims",e,t,r);return[max(getParamValue("x",e,t,r),a,n)];case"Mean":a=getParamValue("axis",e,t,r),n=getParamValue("keepDims",e,t,r);return[mean(getParamValue("x",e,t,r),a,n)];case"Min":a=getParamValue("axis",e,t,r),n=getParamValue("keepDims",e,t,r);return[min(getParamValue("x",e,t,r),a,n)];case"Sum":a=getParamValue("axis",e,t,r),n=getParamValue("keepDims",e,t,r);return[sum(getParamValue("x",e,t,r),a,n)];case"All":a=getParamValue("axis",e,t,r),n=getParamValue("keepDims",e,t,r);return[all(getParamValue("x",e,t,r),a,n)];case"Any":a=getParamValue("axis",e,t,r),n=getParamValue("keepDims",e,t,r);return[any(getParamValue("x",e,t,r),a,n)];case"ArgMax":a=getParamValue("axis",e,t,r);return[argMax(getParamValue("x",e,t,r),a)];case"ArgMin":a=getParamValue("axis",e,t,r);return[argMin(getParamValue("x",e,t,r),a)];case"Prod":a=getParamValue("axis",e,t,r),n=getParamValue("keepDims",e,t,r);return[prod(getParamValue("x",e,t,r),a,n)];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$13=function(e,t,r){switch(e.op){case"ConcatV2":case"Concat":var a=getParamValue("axis",e,t,r),n=getParamValue("tensors",e,t,r);return[concat(n,a)];case"GatherV2":case"Gather":a=getParamValue("axis",e,t,r);var o=getParamValue("x",e,t,r),s=getParamValue("indices",e,t,r);return[gather(o,s,a)];case"ReverseV2":case"Reverse":a=getParamValue("axis",e,t,r),o=getParamValue("x",e,t,r);return[reverse(o,a)];case"Slice":var i=getParamValue("begin",e,t,r),u=getParamValue("size",e,t,r);return[slice(getParamValue("x",e,t,r),i,u)];case"StridedSlice":i=getParamValue("begin",e,t,r);var p=getParamValue("end",e,t,r),c=getParamValue("strides",e,t,r),l=getParamValue("beginMask",e,t,r),m=getParamValue("endMask",e,t,r),f=getParamValue("ellipsisMask",e,t,r),d=getParamValue("newAxisMask",e,t,r),y=getParamValue("shrinkAxisMask",e,t,r),h=getParamValue("x",e,t,r);if(1===i.length&&h.shape.length>1)for(var g=1;g<h.shape.length;g++)i.push(0),p.push(h.shape[g]),c.push(c[0]);return[stridedSlice(h,i,p,c,l,m,f,d,y)];case"Pack":return tidy(function(){var a=getParamValue("axis",e,t,r),n=getParamValue("tensors",e,t,r),o=n[0].shape,s=n[0].squeeze().shape,i=n.map(function(e){var t=util.arraysEqual(e.shape,o);if(!t&&!util.arraysEqual(e.squeeze().shape,s))throw new Error("the input tensors shape does not match");return t?e:e.reshape(o)});return[stack(i,a)]});case"Unpack":return tidy(function(){var a=getParamValue("axis",e,t,r),n=getParamValue("tensor",e,t,r);return unstack(n,a)});case"Tile":var b=getParamValue("reps",e,t,r);return[tile(getParamValue("x",e,t,r),b)];case"Split":case"SplitV":a=getParamValue("axis",e,t,r);var N=getParamValue("numOrSizeSplits",e,t,r);return split(getParamValue("x",e,t,r),N,a);case"ScatterNd":s=getParamValue("indices",e,t,r);var v=getParamValue("values",e,t,r),x=getParamValue("shape",e,t,r);return[scatterND(s,v,x)];case"GatherNd":var w=getParamValue("x",e,t,r);s=getParamValue("indices",e,t,r);return[gatherND(w,s)];case"SparseToDense":s=getParamValue("sparseIndices",e,t,r),x=getParamValue("outputShape",e,t,r);var V=getParamValue("sparseValues",e,t,r),T=getParamValue("defaultValue",e,t,r);return[sparseToDense(s,V,x,T)];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$14=function(e,t,r){switch(e.op){case"FFT":return[fft(getParamValue("x",e,t,r))];case"IFFT":return[ifft(getParamValue("x",e,t,r))];case"RFFT":return[rfft(getParamValue("x",e,t,r))];case"IRFFT":return[irfft(getParamValue("x",e,t,r))];default:throw TypeError("Node type "+e.op+" is not implemented")}},executeOp$15=function(e,t,r){switch(e.op){case"Cast":return[cast(getParamValue("x",e,t,r),getParamValue("dtype",e,t,r))];case"ExpandDims":var a=getParamValue("axis",e,t,r);return[expandDims(getParamValue("x",e,t,r),a)];case"Squeeze":a=getParamValue("axis",e,t,r);return[squeeze(getParamValue("x",e,t,r),a)];case"Reshape":return[reshape(getParamValue("x",e,t,r),getParamValue("shape",e,t,r))];case"PadV2":case"Pad":return[pad(getParamValue("x",e,t,r),split$1(getParamValue("padding",e,t,r),2),getParamValue("constantValue",e,t,r))];case"SpaceToBatchND":var n=getParamValue("blockShape",e,t,r),o=split$1(getParamValue("paddings",e,t,r),2);return[spaceToBatchND(getParamValue("x",e,t,r),n,o)];case"BatchToSpaceND":n=getParamValue("blockShape",e,t,r);var s=split$1(getParamValue("crops",e,t,r),2);return[batchToSpaceND(getParamValue("x",e,t,r),n,s)];case"DepthToSpace":var i=getParamValue("blockSize",e,t,r),u=getParamValue("dataFormat",e,t,r).toUpperCase();return[depthToSpace(getParamValue("x",e,t,r),i,u)];default:throw TypeError("Node type "+e.op+" is not implemented")}};function executeOp$16(e,t,r){var a=function(e,t,r){switch(e.category){case"arithmetic":return executeOp(e,t,r);case"basic_math":return executeOp$1(e,t,r);case"control":return executeOp$2(e,t,r);case"convolution":return executeOp$3(e,t,r);case"creation":return executeOp$4(e,t,r);case"dynamic":return executeOp$5(e,t,r);case"evaluation":return executeOp$6(e,t,r);case"image":return executeOp$8(e,t,r);case"graph":return executeOp$7(e,t,r);case"logical":return executeOp$9(e,t,r);case"matrices":return executeOp$10(e,t,r);case"normalization":return executeOp$11(e,t,r);case"reduction":return executeOp$12(e,t,r);case"slice_join":return executeOp$13(e,t,r);case"spectral":return executeOp$14(e,t,r);case"transformation":return executeOp$15(e,t,r);default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,r);return a instanceof Promise?a.then(function(e){return[].concat(e)}):[].concat(a)}var ExecutionContext=function(){function e(e,t){this.weightMap=e,this.tensorArrayMap=t,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return e.prototype.newFrame=function(e,t){return{id:e,frameName:t,iterationId:0}},Object.defineProperty(e.prototype,"currentContext",{get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentContextId",{get:function(){return this._currentContextIds[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentContextIds",{get:function(){return this._currentContextIds},enumerable:!0,configurable:!0}),e.prototype.generateCurrentContextIds=function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var r=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e},e.prototype.contextIdforContexts=function(e){return e?e.map(function(e){return 0===e.id&&0===e.iterationId?"":e.frameName+"-"+e.iterationId}).join("/"):""},e.prototype.enterFrame=function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))},e.prototype.exitFrame=function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()},e.prototype.nextIteration=function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))},e.prototype.getWeight=function(e){return this.weightMap[e]},e.prototype.addTensorArray=function(e){this.tensorArrayMap[e.id]=e},e.prototype.getTensorArray=function(e){return this.tensorArrayMap[e]},e}(),GraphExecutor=function(){function e(e){this.graph=e,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this.placeholders=e.placeholders,this._outputs=e.outputs,this.compile()}return Object.defineProperty(e.prototype,"weightMap",{get:function(){return this._weightMap},set:function(e){var t=Object.keys(e).map(function(t){return e[t].map(function(e){return e.id})});this.weightIds=[].concat.apply([],t),this._weightMap=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputs",{get:function(){return this.placeholders.map(function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return this._outputs.map(function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputNodes",{get:function(){return this.placeholders.map(function(e){return e.name})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputNodes",{get:function(){return this.outputs.map(function(e){return e.name})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isControlFlowModel",{get:function(){return this.graph.withControlFlow},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDynamicShapeModel",{get:function(){return this.graph.withDynamicShape},enumerable:!0,configurable:!0}),e.prototype.compile=function(e){if(!this.graph.withControlFlow&&!this.graph.withDynamicShape){var t=[],r=e||this.graph.placeholders,a=r.map(function(e){return e.name}).sort().join(this.SEPERATOR);if(!this.compiledMap.get(a)){for(var n=r.concat(this.graph.weights),o={};n.length>0;){var s=n.pop();o[s.name]=!0,t.push(s),s.children.forEach(function(e){!o[e.name]&&e.inputNames.every(function(e){var t=getNodeNameAndIndex(e)[0];return o[t]})&&n.push(e)})}this.compiledMap.set(a,t)}}},e.prototype.execute=function(e,t,r){var a=this;void 0===t&&(t=!0);var n=Object.keys(e).sort();this.checkInput(e,t),this.checkInputShapeAndType(e,t),this.compile(n.map(function(e){return a.graph.nodes[e]}));var o=this.calculateOutputs(r);this.checkOutput(this.compiledMap.get(n.join(this.SEPERATOR)),o);var s={};return tidy(function(){for(var t=new ExecutionContext(a._weightMap,s),r=__assign({},a.weightMap,e),i=a.getFrozenTensorIds(r),u={},p=a.compiledMap.get(n.join(a.SEPERATOR)),c=0;c<p.length;c++){var l=p[c];if(r[l.name]||(r[l.name]=executeOp$16(l,r,t),a.checkTensorForDisposal(l.name,l,r,t,i,o,u)),o.every(function(e){return!!r[e]}))break}return a.findOutputs(r,t,o)})},e.prototype.getFrozenTensorIds=function(e){var t=[].concat.apply([],Object.keys(e).map(function(t){return e[t]}).map(function(e){return e.map(function(e){return e.id})}));return new Set(t)},e.prototype.checkTensorForDisposal=function(e,t,r,a,n,o,s){"control"!==t.category&&-1===o.indexOf(e)&&(r[e].forEach(function(e){null!=e&&(s[e.id]=(s[e.id]||0)+t.children.length)}),t.inputs.forEach(function(e){if("control"!==e.category){var t=getTensorsForCurrentContenxt(e.name,r,a);null!=t&&t.forEach(function(e){if(e&&!n.has(e.id)){var t=s[e.id];1===t?(e.dispose(),delete s[e.id]):null!=t&&s[e.id]--}})}}))},e.prototype.executeAsync=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,a,n,o,s,i,u,p,c=this;return __generator(this,function(l){switch(l.label){case 0:return this.checkInput(e,!1),this.checkInputShapeAndType(e,!1),r={},a=new ExecutionContext(this._weightMap,r),n=this.calculateOutputs(t),[4,this.executeWithControlFlow(e,a,n)];case 1:return o=l.sent(),s=this.findOutputs(o,a,t),i=Object.keys(s).map(function(e){return s[e].id}),u=Object.keys(e).map(function(t){return e[t].map(function(e){return e.id})}),p=[].concat.apply([],u),Object.keys(o).forEach(function(e){o[e].forEach(function(e){e&&-1===i.indexOf(e.id)&&-1===p.indexOf(e.id)&&-1===c.weightIds.indexOf(e.id)&&e.dispose()})}),[2,s]}})})},e.prototype.executeWithControlFlow=function(e,t,r){return __awaiter(this,void 0,void 0,function(){var a,n,o,s,i,u,p,c,l=this;return __generator(this,function(m){switch(m.label){case 0:a=Object.keys(e),n=a.map(function(e){return l.graph.nodes[e]}),o=n.concat(this.graph.weights).map(function(e){return{node:e,contexts:t.currentContext}}),s=__assign({},this.weightMap,e),i={},u=this.getFrozenTensorIds(s),p={},m.label=1;case 1:return o.length>0?(c=this.processStack(n,o,t,s,p,u,r,i),[4,Promise.all(c)]):[3,3];case 2:return m.sent(),[3,1];case 3:return[2,s]}})})},e.prototype.processStack=function(e,t,r,a,n,o,s,i){for(var u=this,p=[],c=function(){var c=t.pop();r.currentContext=c.contexts;var m="";if("enter"===c.node.op&&getParamValue("isConstant",c.node,a,r)&&(m=getNodeNameAndIndex(c.node.name,r)[0]),-1===e.indexOf(c.node)){var f=executeOp$16(c.node,a,r);m||(m=getNodeNameAndIndex(c.node.name,r)[0]);var d=r.currentContext;f instanceof Promise?p.push(f.then(function(e){return a[m]=e,r.currentContext=d,u.checkTensorForDisposal(m,c.node,a,r,o,s,i),u.processChildNodes(c.node,t,r,a,n),e})):(a[m]=f,l.checkTensorForDisposal(m,c.node,a,r,o,s,i),l.processChildNodes(c.node,t,r,a,n))}else l.processChildNodes(c.node,t,r,a,n)},l=this;t.length>0;)c();return p},e.prototype.processChildNodes=function(e,t,r,a,n){e.children.forEach(function(e){var o=getNodeNameAndIndex(e.name,r)[0];n[o]||("merge"===e.op?e.inputNames.some(function(e){return!!getTensor(e,a,r)})&&(n[o]=!0,t.push({contexts:r.currentContext,node:e})):e.inputNames.every(function(e){return!!getTensor(e,a,r)})&&(n[o]=!0,t.push({contexts:r.currentContext,node:e})))})},e.prototype.calculateOutputs=function(e){return!e||e instanceof Array||(e=[e]),e||this.graph.outputs.map(function(e){return e.name})},e.prototype.findOutputs=function(e,t,r){return this.calculateOutputs(r).reduce(function(r,a){return r[a]=getTensor(a,e,t),r},{})},e.prototype.dispose=function(){var e=this;Object.keys(this.weightMap).forEach(function(t){return e.weightMap[t].forEach(function(e){return e.dispose()})})},e.prototype.checkInputShapeAndType=function(e,t){void 0===t&&(t=!0),this.placeholders.forEach(function(r){var a=e[r.name];if(t||a){var n=a[0];if(r.attrParams.shape&&r.attrParams.shape.value){var o=r.attrParams.shape.value,s=o.length===n.shape.length&&n.shape.every(function(e,t){return-1===o[t]||o[t]===e});util.assert(s,"The shape of dict['"+r.name+"'] provided in model.execute(dict) must be ["+o+"], but was ["+n.shape+"]")}r.attrParams.dtype&&r.attrParams.dtype.value&&util.assert(n.dtype===r.attrParams.dtype.value,"The dtype of dict['"+r.name+"'] provided in model.execute(dict) must be "+r.attrParams.dtype.value+", but was "+n.dtype)}})},e.prototype.checkInput=function(e,t){var r=this;void 0===t&&(t=!0);var a=Object.keys(e),n=[],o=[];this.inputNodes.forEach(function(e){-1===a.indexOf(e)&&n.push(e)}),a.forEach(function(e){-1===r.inputNodes.indexOf(e)&&o.push(e)});var s=o.filter(function(e){return!r.graph.nodes[e]});if(n.length>0&&t)throw new Error("The dict provided in model.execute(dict) has the keys ["+a+"], but is missing the required keys: ["+n+"].");if(o.length>0&&t)throw new Error("The dict provided in model.execute(dict) has unused keys: ["+o+"]. Please provide only the following keys: ["+this.inputNodes+"].");if(s.length>0)throw new Error("The dict provided in model.execute(dict) has keys: ["+s+"] not part of model graph.")},e.prototype.checkOutput=function(e,t){var r=e.map(function(e){return e.name}),a=[];if(t.forEach(function(e){var t=parseNodeName(e)[0];-1===r.indexOf(t)&&a.push(t)}),a.length>0)throw new Error("The following outputs are not generated by the execution: ["+a+"].")},e}(),TFHUB_SEARCH_PARAM="?tfjs-format=file",DEFAULT_MODEL_NAME="tensorflowjs_model.pb",DEFAULT_MANIFEST_NAME="weights_manifest.json",FrozenModel=function(){function e(e,t,r,a){this.modelUrl=e,this.weightManifestUrl=t,this.requestOption=r,this.weightPrefix=a,this.version="n/a"}return Object.defineProperty(e.prototype,"modelVersion",{get:function(){return this.version},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputNodes",{get:function(){return this.executor.inputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputNodes",{get:function(){return this.executor.outputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputs",{get:function(){return this.executor.inputs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return this.executor.outputs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weights",{get:function(){return this.executor.weightMap},enumerable:!0,configurable:!0}),e.prototype.findIOHandler=function(){var e=[this.modelUrl,this.weightManifestUrl];if(this.requestOption)this.handler=io.browserHTTPRequest(e,this.requestOption,this.weightPrefix);else{var t=io.getLoadHandlers(e);if(0===t.length)t.push(io.browserHTTPRequest(e,this.requestOption));else if(t.length>1)throw new Error("Found more than one ("+t.length+") load handlers for URL '"+[e]+"'");this.handler=t[0]}},e.prototype.load=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r;return __generator(this,function(a){switch(a.label){case 0:if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return[4,this.handler.load()];case 1:return e=a.sent(),t=compiled_api_1.GraphDef.decode(new Uint8Array(e.modelTopology)),this.version=t.versions.producer+"."+t.versions.minConsumer,r=io.decodeWeights(e.weightData,e.weightSpecs),this.executor=new GraphExecutor(OperationMapper.Instance.transformGraph(t)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),[2,!0]}})})},e.prototype.predict=function(e,t){return this.execute_(e,!0,this.outputNodes)},e.prototype.constructTensorMap=function(e){var t=e instanceof Tensor?[e]:e;if(t.length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,the frozen model has "+this.inputNodes.length+" placeholders, while there are "+t.length+" input tensors.");return this.inputNodes.reduce(function(e,r,a){return e[r]=t[a],e},{})},e.prototype.execute=function(e,t){return this.execute_(e,!1,t)},e.prototype.execute_=function(e,t,r){if(void 0===t&&(t=!0),r=r||this.outputNodes,(e instanceof Tensor||Array.isArray(e))&&(e=this.constructTensorMap(e)),this.executor.isControlFlowModel||this.executor.isDynamicShapeModel)throw new Error("The model contains control flow or dynamic shape ops, please use executeAsync method");var a=this.executor.execute(this.convertTensorMapToTensorsMap(e),t,r),n=Object.keys(a);return Array.isArray(r)&&r.length>1?r.map(function(e){return a[e]}):a[n[0]]},e.prototype.executeAsync=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,a;return __generator(this,function(n){switch(n.label){case 0:if(!this.executor.isControlFlowModel&&!this.executor.isDynamicShapeModel)throw new Error("The model does not contain control flow or dynamic shape ops, please use execute method for better performance.");return t=t||this.outputNodes,(e instanceof Tensor||Array.isArray(e))&&(e=this.constructTensorMap(e)),[4,this.executor.executeAsync(this.convertTensorMapToTensorsMap(e),t)];case 1:return r=n.sent(),a=Object.keys(r),[2,Array.isArray(t)&&t.length>1?t.map(function(e){return r[e]}):r[a[0]]]}})})},e.prototype.convertTensorMapToTensorsMap=function(e){return Object.keys(e).reduce(function(t,r){return t[r]=[e[r]],t},{})},e.prototype.dispose=function(){this.executor.dispose()},e}();function loadFrozenModel(e,t,r){return __awaiter(this,void 0,void 0,function(){var a;return __generator(this,function(n){switch(n.label){case 0:return[4,(a=new FrozenModel(e,t,r)).load()];case 1:return n.sent(),[2,a]}})})}function loadTfHubModule(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return e.endsWith("/")||(e+="/"),[2,loadFrozenModel(""+e+DEFAULT_MODEL_NAME+TFHUB_SEARCH_PARAM,""+e+DEFAULT_MANIFEST_NAME+TFHUB_SEARCH_PARAM,t)]})})}var base64$1=createCommonjsModule(function(module,exports){var global;global="undefined"!=typeof self?self:"undefined"!=typeof window?window:commonjsGlobal,module.exports=function(global){var _Base64=global.Base64,version="2.4.9",buffer;if(module.exports)try{buffer=eval("require('buffer').Buffer")}catch(e){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(e){for(var t={},r=0,a=e.length;r<a;r++)t[e.charAt(r)]=r;return t}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?fromCharCode(192|t>>>6)+fromCharCode(128|63&t):fromCharCode(224|t>>>12&15)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)}var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return fromCharCode(240|t>>>18&7)+fromCharCode(128|t>>>12&63)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(e){return e.replace(re_utob,cb_utob)},cb_encode=function(e){var t=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),a=[b64chars.charAt(r>>>18),b64chars.charAt(r>>>12&63),t>=2?"=":b64chars.charAt(r>>>6&63),t>=1?"=":b64chars.charAt(63&r)];return a.join("")},btoa=global.btoa?function(e){return global.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e)).toString("base64")}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e)).toString("base64")}:function(e){return btoa(utob(e))},encode=function(e,t){return t?_encode(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):_encode(String(e))},encodeURI=function(e){return encode(e,!0)},re_btou=new RegExp(["[-][-]","[-][-]{2}","[-][-]{3}"].join("|"),"g"),cb_btou=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),r=t-65536;return fromCharCode(55296+(r>>>10))+fromCharCode(56320+(1023&r));case 3:return fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=function(e){return e.replace(re_btou,cb_btou)},cb_decode=function(e){var t=e.length,r=t%4,a=(t>0?b64tab[e.charAt(0)]<<18:0)|(t>1?b64tab[e.charAt(1)]<<12:0)|(t>2?b64tab[e.charAt(2)]<<6:0)|(t>3?b64tab[e.charAt(3)]:0),n=[fromCharCode(a>>>16),fromCharCode(a>>>8&255),fromCharCode(255&a)];return n.length-=[0,0,2,1][r],n.join("")},atob=global.atob?function(e){return global.atob(e)}:function(e){return e.replace(/[\s\S]{1,4}/g,cb_decode)},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e,"base64")).toString()}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e,"base64")).toString()}:function(e){return btou(atob(e))},decode=function(e){return _decode(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var e=global.Base64;return global.Base64=_Base64,e};if(global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty){var noEnum=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)})),Object.defineProperty(String.prototype,"toBase64",noEnum(function(e){return encode(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,!0)}))}}return global.Meteor&&(Base64=global.Base64),module.exports&&(module.exports.Base64=global.Base64),{Base64:global.Base64}}(global)}),base64_1$1=base64$1.Base64,tensorflow_json;!function(e){!function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"}(e.DataType||(e.DataType={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(e.SaverDef||(e.SaverDef={}))}(tensorflow_json||(tensorflow_json={}));var CONTROL_FLOW_OPS$1=["Switch","Merge","Enter","Exit","NextIteration"],DYNAMIC_SHAPE_OPS$1=["NonMaxSuppressionV2","NonMaxSuppressionV3","Where"],OperationMapper$1=function(){function e(){var e=[arithmetic,basicMath,control,convolution,creation,dynamic,evaluation,logical,image$1,graph,matrices,normalization,reduction,sliceJoin,spectral,transformation],t=[].concat.apply([],e.map(function(e){return e.json}));this.opMappers=t.reduce(function(e,t){return e[t.tfOpName]=t,e},{})}return Object.defineProperty(e,"Instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),e.prototype.isControlFlow=function(e){return CONTROL_FLOW_OPS$1.some(function(t){return t===e.op})},e.prototype.isDynamicShape=function(e){return DYNAMIC_SHAPE_OPS$1.some(function(t){return t===e.op})},e.prototype.transformGraph=function(e){var t=this,r=!1,a=!1,n=[],o=[],s=e.node.reduce(function(e,s){return e[s.name]=t.mapNode(s),t.isControlFlow(s)&&(r=!0),t.isDynamicShape(s)&&(a=!0),"Placeholder"===s.op&&n.push(e[s.name]),"Const"===s.op&&o.push(e[s.name]),e},{}),i=[],u=[];return Object.keys(s).forEach(function(e){var t=s[e];t.inputNames.forEach(function(e){var r=getNodeNameAndIndex(e)[0];t.inputs.push(s[r]),s[r].children.push(t)}),0===t.inputs.length&&i.push(t)}),Object.keys(s).forEach(function(e){var t=s[e];0===t.children.length&&u.push(t)}),{nodes:s,inputs:i,outputs:u,weights:o,placeholders:n,withControlFlow:r,withDynamicShape:a}},e.prototype.mapNode=function(e){var t=this,r=this.opMappers[e.op];if(void 0===r)throw new Error("Tensorflow Op is not supported: "+e.op);var a={name:e.name,op:e.op,category:r.category,inputNames:(e.input||[]).map(function(e){return e.startsWith("^")?e.substr(1):e}),inputs:[],children:[],inputParams:{},attrParams:{}};return r.inputs&&(a.inputParams=r.inputs.reduce(function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e},{})),r.attrs&&(a.attrParams=r.attrs.reduce(function(r,a){var n=a.type,o=void 0;switch(a.type){case"string":void 0===(o=t.getStringParam(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(o=t.getStringParam(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number":void 0===(o=t.getNumberParam(e.attr,a.tfName,a.defaultValue||0))&&a.tfDeprecatedName&&(o=t.getNumberParam(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"number[]":void 0===(o=t.getNumericArrayParam(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(o=t.getNumericArrayParam(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"bool":void 0===(o=t.getBoolParam(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(o=t.getBoolParam(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"shape":void 0===(o=t.getTensorShapeParam(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(o=t.getTensorShapeParam(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"dtype":void 0===(o=t.getDtypeParam(e.attr,a.tfName,a.defaultValue))&&a.tfDeprecatedName&&(o=t.getDtypeParam(e.attr,a.tfDeprecatedName,a.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: "+a.type+" for op: "+e.op)}return r[a.name]={value:o,type:n},r},{})),a},e.prototype.getStringParam=function(e,t,r,a){void 0===a&&(a=!1);var n=e[t];if(void 0!==n){var o=Array.isArray(n.s)?String.fromCharCode.apply(null,n.s):base64_1$1.decode(n.s);return a?o:o.toLowerCase()}return r},e.prototype.getBoolParam=function(e,t,r){var a=e[t];return a?a.b:r},e.prototype.getNumberParam=function(e,t,r){var a=e[t]||{},n=a.i?a.i:a.f?a.f:r;return"number"==typeof n?n:parseInt(n,10)},e.prototype.getDtypeParam=function(e,t,r){var a=e[t];if(a&&a.type){var n=a.type;switch("string"==typeof a.type&&(n=tensorflow_json.DataType[a.type]),n){case tensorflow_json.DataType.DT_FLOAT:return"float32";case tensorflow_json.DataType.DT_INT32:return"int32";case tensorflow_json.DataType.DT_BOOL:return"bool";default:return r}}return r},e.prototype.getTensorShapeParam=function(e,t,r){var a=e[t];return a&&a.shape?a.shape.dim.map(function(e){return"number"==typeof e.size?e.size:parseInt(e.size,10)}):r},e.prototype.getNumericArrayParam=function(e,t,r){var a=e[t];return a?(a.list.f&&a.list.f.length?a.list.f:a.list.i).map(function(e){return"number"==typeof e?e:parseInt(e,10)}):r},e}(),FrozenModel$1=function(){function e(e,t,r){this.modelUrl=e,this.requestOption=t,this.weightPrefix=r,this.version="n/a"}return Object.defineProperty(e.prototype,"modelVersion",{get:function(){return this.version},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputNodes",{get:function(){return this.executor.inputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputNodes",{get:function(){return this.executor.outputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputs",{get:function(){return this.executor.inputs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return this.executor.outputs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weights",{get:function(){return this.executor.weightMap},enumerable:!0,configurable:!0}),e.prototype.findIOHandler=function(){var e=this.modelUrl;if(this.requestOption)this.handler=io.browserHTTPRequest(e,this.requestOption,this.weightPrefix);else{var t=io.getLoadHandlers(e);if(0===t.length)t.push(io.browserHTTPRequest(e,this.requestOption));else if(t.length>1)throw new Error("Found more than one ("+t.length+") load handlers for URL '"+[e]+"'");this.handler=t[0]}},e.prototype.load=function(){return __awaiter(this,void 0,void 0,function(){var e,t,r;return __generator(this,function(a){switch(a.label){case 0:if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return[4,this.handler.load()];case 1:return e=a.sent(),t=e.modelTopology,this.version=t.versions.producer+"."+t.versions.minConsumer,r=io.decodeWeights(e.weightData,e.weightSpecs),this.executor=new GraphExecutor(OperationMapper$1.Instance.transformGraph(t)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),[2,!0]}})})},e.prototype.predict=function(e,t){return this.execute_(e,!0,this.outputNodes)},e.prototype.constructTensorMap=function(e){var t=e instanceof Tensor?[e]:e;if(t.length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,the frozen model has "+this.inputNodes.length+" placeholders, while there are "+t.length+" input tensors.");return this.inputNodes.reduce(function(e,r,a){return e[r]=t[a],e},{})},e.prototype.execute=function(e,t){return this.execute_(e,!1,t)},e.prototype.execute_=function(e,t,r){if(void 0===t&&(t=!0),r=r||this.outputNodes,(e instanceof Tensor||Array.isArray(e))&&(e=this.constructTensorMap(e)),this.executor.isControlFlowModel||this.executor.isDynamicShapeModel)throw new Error("The model contains control flow or dynamic shape ops, please use executeAsync method");var a=this.executor.execute(this.convertTensorMapToTensorsMap(e),t,r),n=Object.keys(a);return Array.isArray(r)&&r.length>1?r.map(function(e){return a[e]}):a[n[0]]},e.prototype.executeAsync=function(e,t){return __awaiter(this,void 0,void 0,function(){var r,a;return __generator(this,function(n){switch(n.label){case 0:if(!this.executor.isControlFlowModel&&!this.executor.isDynamicShapeModel)throw new Error("The model does not contain control flow or dynamic shape ops, please use execute method for better performance.");return t=t||this.outputNodes,(e instanceof Tensor||Array.isArray(e))&&(e=this.constructTensorMap(e)),[4,this.executor.executeAsync(this.convertTensorMapToTensorsMap(e),t)];case 1:return r=n.sent(),a=Object.keys(r),[2,Array.isArray(t)&&t.length>1?t.map(function(e){return r[e]}):r[a[0]]]}})})},e.prototype.convertTensorMapToTensorsMap=function(e){return Object.keys(e).reduce(function(t,r){return t[r]=[e[r]],t},{})},e.prototype.dispose=function(){this.executor.dispose()},e}();function loadFrozenModel$1(e,t){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(a){switch(a.label){case 0:return[4,(r=new FrozenModel$1(e,t)).load()];case 1:return a.sent(),[2,r]}})})}var version="0.7.2";function loadFrozenModel$2(e,t,r){return e&&e.endsWith(".json")?loadFrozenModel$1(e,r):loadFrozenModel(e,t,r)}export{loadFrozenModel$2 as loadFrozenModel,FrozenModel,loadTfHubModule,FrozenModel$1 as FrozenModelJSON,version as version_converter};
//# sourceMappingURL=tf-converter.esm.js.map
